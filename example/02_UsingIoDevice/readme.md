# 多工程シミュレーション：プレス・搬送連携ライン

このプロジェクトは、独立した2台のPLC（前工程：プレス、後工程：コンベア）を、専用の `iodevice` ブリッジで接続し、自動化ラインの連携をシミュレーションするものです。

## 1. システム構成
- **PLC_Press (Port 502)**: プレス加工のロジックを担当。
- **PLC_Conv (Port 503)**: 製品搬送のロジックを担当。
- **IODevice (Bridge)**: 2つのPLC間の信号を仲介する「神経」の役割。

## 2. 連携シナリオ
1. **プレス完了**: `PLC_Press` が加工を終えると、内部リレー `M10` (搬送許可) をONにします。
2. **信号転送**: `iodevice` が `PLC_Press` の `M10` を検知し、即座に `PLC_Conv` の入力 `X10` (搬送開始) をONにします。
3. **搬送動作**: `PLC_Conv` が動作を開始し、完了すると内部リレー `M20` (搬送完了) をONにします。
4. **サイクル再開**: `iodevice` が `M20` を検知し、`PLC_Press` の入力 `X1` (次サイクル許可) をONにします。

## 3. この構成（type: iodevice）のメリット
- **疎結合な設計**: 各PLCは相手のIPアドレスを知る必要がなく、自身の入出力（X/M）に集中できます。
- **高い拡張性**: 連携ロジックを `iodevice` 側のYAMLで管理できるため、ラダープログラムを書き換えずに工程間のルールを変更できます。
- **耐障害性**: `orchestrator` が `iodevice` を独立したインフラ層として監視。通信エラーでブリッジが落ちても自動復旧します。

## 4. 実行方法
```bash
python orchestrator.py orchestrator.yaml